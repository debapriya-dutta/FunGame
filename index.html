<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Will you be my Valentine? üíò</title>

  <style>
    :root{
      --bg1:#ff9a9e; --bg2:#fad0c4; --bg3:#fbc2eb;
      --card:rgba(255,255,255,.92);
      --text:#2b2b2b; --muted:rgba(0,0,0,.62);
      --yes:#358717; --no:#ff3b5c;
      --shadow:0 22px 60px rgba(0,0,0,.18);
      --ring:0 0 0 4px rgba(255,59,92,.22);
    }
    *{box-sizing:border-box}
    body{
      margin:0; height:100vh;
      display:flex; align-items:center; justify-content:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text); overflow:hidden;
      background:
        radial-gradient(1200px 800px at 15% 10%, rgba(255,255,255,.35), transparent 55%),
        radial-gradient(900px 650px at 85% 20%, rgba(255,255,255,.25), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2), var(--bg3));
    }

    .card{
      width:min(720px, 92vw);
      background:var(--card);
      border-radius:26px;
      padding:28px 22px 22px;
      box-shadow:var(--shadow);
      position:relative;
      overflow:hidden;
      border:1px solid rgba(0,0,0,.05);
    }

    /* Shimmer overlay MUST NOT block clicks */
    .card::before{
      content:"";
      position:absolute; inset:-80px;
      background: linear-gradient(110deg, transparent 20%, rgba(255,255,255,.55) 35%, transparent 55%);
      transform: translateX(-60%);
      animation: shimmer 5.5s ease-in-out infinite;
      pointer-events:none; /* IMPORTANT */
      z-index:0;
    }
    @keyframes shimmer{
      0%{ transform:translateX(-65%) rotate(8deg); opacity:.2; }
      45%{ opacity:.35; }
      100%{ transform:translateX(65%) rotate(8deg); opacity:.2; }
    }

    header{display:flex; justify-content:space-between; gap:12px; position:relative; z-index:2}
    .titleWrap{flex:1}
    h1{margin:0 0 6px; font-size: clamp(26px, 3.2vw, 42px); line-height:1.1;}
    .subtitle{margin:0; font-size:15px; color:var(--muted);}

    .pillRow{
      margin-top:10px;
      display:flex; flex-wrap:wrap; gap:8px; justify-content:center;
      position:relative; z-index:2;
    }
    .pill{
      font-size:12px; padding:7px 10px; border-radius:999px;
      background:rgba(255,255,255,.75); border:1px solid rgba(0,0,0,.06);
      color:rgba(0,0,0,.65);
    }

    .playground{
      position:relative;
      height:260px;
      margin-top:14px;
      border-radius:20px;
      background:
        radial-gradient(500px 280px at 25% 25%, rgba(255,59,92,.14), transparent 60%),
        radial-gradient(500px 300px at 75% 20%, rgba(53,135,23,.12), transparent 62%),
        radial-gradient(900px 420px at 50% 120%, rgba(255,255,255,.65), rgba(255,255,255,.0)),
        rgba(255,255,255,.55);
      overflow:hidden;
      border:1px solid rgba(0,0,0,.07);
      z-index:2;
      touch-action:none; /* so pointer events behave nicely on mobile */
    }

    .btn{
      border:0;
      padding:14px 22px;
      border-radius:16px;
      font-weight:800;
      font-size:16px;
      cursor:pointer;
      user-select:none;
      position:absolute;
      transform: translate(var(--tx, 0px), var(--ty, 0px));
      transition: transform .08s ease, filter .12s ease, box-shadow .12s ease;
      will-change: transform;
    }
    .btn:active{ transform: translate(var(--tx, 0px), var(--ty, 0px)) scale(.98); }
    .btn:focus-visible{ outline:none; box-shadow: var(--ring); }

    .yesBtn{
      left:30%; top:64%;
      background:var(--yes); color:white;
      box-shadow:0 14px 30px rgba(53,135,23,.28);
      z-index:3;
    }
    .noBtn{
      left:58%; top:64%;
      background:var(--no); color:white;
      box-shadow:0 14px 30px rgba(255,59,92,.28);
      z-index:3;
    }

    .result{margin-top:12px; min-height:28px; font-size:18px; font-weight:800; position:relative; z-index:2;}
    .hint{margin-top:6px; font-size:12px; color:rgba(0,0,0,.55); position:relative; z-index:2;}

    .toast{
      position:absolute; left:50%; top:14px; transform:translateX(-50%);
      background:rgba(0,0,0,.75); color:#fff;
      padding:8px 12px; border-radius:12px; font-size:13px;
      opacity:0; pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      z-index:50; white-space:nowrap;
    }
    .toast.show{ opacity:1; transform:translateX(-50%) translateY(2px); }

    .confetti{
      position:fixed; width:10px; height:10px;
      pointer-events:none; opacity:1;
      animation: fall 1.25s linear forwards;
      z-index:999;
    }
    @keyframes fall{
      0%{ transform: translateY(0) rotate(0deg); opacity:1; }
      100%{ transform: translateY(110vh) rotate(720deg); opacity:0; }
    }
    .heartBurst{
      position:fixed; pointer-events:none;
      animation: heartUp 1.35s ease forwards;
      z-index:999;
    }
    @keyframes heartUp{
      0%{ transform: translateY(0) scale(1); opacity:1; }
      100%{ transform: translateY(-110vh) rotate(240deg) scale(1.15); opacity:0; }
    }
  </style>
</head>

<body>
  <div class="card">
    <div class="toast" id="toast" aria-live="polite"></div>

    <header>
      <div class="titleWrap">
        <h1 id="title">Will you be my Valentine? üíòü•π</h1>
        <p class="subtitle" id="subtitle">Just one cute question for you üíå‚ú®</p>
      </div>
    </header>

    <div class="pillRow">
      <span class="pill" id="triesPill">No tries: 0</span>
      <span class="pill" id="statusPill">Status: pending</span>
    </div>

    <div class="playground" id="playground" aria-label="Buttons area">
      <button class="btn yesBtn" id="yesBtn" type="button">YES üíñ</button>
      <button class="btn noBtn" id="noBtn" type="button">NO üôà</button>
    </div>

    <div class="result" id="result"></div>
    <div class="hint" id="hint">Move closer to ‚ÄúNO‚Äù‚Ä¶ it runs away üòÑüí®</div>
  </div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  console.log("JS loaded ‚úÖ"); // if you don't see this, JS isn't running. [1](https://learn.microsoft.com/en-us/microsoft-edge/devtools/console/console-debug-javascript)

  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");
  const playground = document.getElementById("playground");
  const result = document.getElementById("result");
  const toast = document.getElementById("toast");
  const triesPill = document.getElementById("triesPill");
  const statusPill = document.getElementById("statusPill");
  const hint = document.getElementById("hint");

  // Safety check (prevents silent failure if IDs are wrong)
  if (!yesBtn || !noBtn || !playground) {
    console.error("Missing elements. Check IDs: yesBtn/noBtn/playground");
    return;
  }

  // Toast helper
  let toastTimer;
  function showToast(msg){
    toast.textContent = msg;
    toast.classList.add("show");
    clearTimeout(toastTimer);
    toastTimer = setTimeout(() => toast.classList.remove("show"), 900);
  }

  // NO runaway config
  let noTries = 0;
  const tease = ["Oops üòá","Nice try üòå","Hehe‚Ä¶ not today üíû","I‚Äôm shy üôà","Too slow üòÑ","Are you sure? ü•∫","Try YES instead üòò"];

  const clamp = (v, min, max) => Math.max(min, Math.min(max, v));

  // Move NO by updating CSS vars (translate)
  function setNoOffset(x, y){
    noBtn.style.setProperty("--tx", x + "px");
    noBtn.style.setProperty("--ty", y + "px");
  }

  function randomOffset(){
    const pg = playground.getBoundingClientRect();
    const nb = noBtn.getBoundingClientRect();
    const maxX = pg.width - nb.width - 12;
    const maxY = pg.height - nb.height - 12;
    const x = Math.random() * maxX - (pg.width*0.20); // centered-ish
    const y = Math.random() * maxY - (pg.height*0.20);
    return {x, y};
  }

  // push-away move (mouse comes closer)
  function pushAway(px, py){
    const pg = playground.getBoundingClientRect();
    const nb = noBtn.getBoundingClientRect();

    const bx = nb.left + nb.width/2;
    const by = nb.top + nb.height/2;

    let dx = bx - px;
    let dy = by - py;
    const len = Math.hypot(dx, dy) || 1;
    dx /= len; dy /= len;

    // escape distance (bigger when tries increase)
    const escape = 120 + Math.min(120, noTries * 10);

    // compute new target inside playground area
    const localX = (bx - pg.left) + dx * escape;
    const localY = (by - pg.top) + dy * escape;

    const maxX = pg.width - nb.width - 12;
    const maxY = pg.height - nb.height - 12;

    // convert to translate offsets relative to initial left/top position
    // we approximate by setting translate to (target - originalLeftWithinPg)
    const originalLeft = (parseFloat(getComputedStyle(noBtn).left) / 100) * pg.width; // since left is %
    const originalTop  = (parseFloat(getComputedStyle(noBtn).top)  / 100) * pg.height;

    const tx = clamp(localX - originalLeft, -originalLeft + 6, maxX - originalLeft);
    const ty = clamp(localY - originalTop , -originalTop + 6, maxY - originalTop);

    setNoOffset(tx + (Math.random()-0.5)*30, ty + (Math.random()-0.5)*30);
  }

  // Place NO initially
  const init = randomOffset();
  setNoOffset(init.x, init.y);

  // Make NO run when pointer gets close (use pointer events for mobile+desktop) [6](https://developer.mozilla.org/en-US/docs/Web/API/Element/mousemove_event)[7](https://stackoverflow.com/questions/37731975/mousemove-event-not-firing-on-page-element-or-document)
  let last = 0;
  function onPointerMove(e){
    const now = performance.now();
    if (now - last < 16) return; // throttle
    last = now;

    const nb = noBtn.getBoundingClientRect();
    const cx = nb.left + nb.width/2;
    const cy = nb.top + nb.height/2;
    const dist = Math.hypot(e.clientX - cx, e.clientY - cy);

    const danger = 190; // increase => runs sooner
    if (dist < danger){
      pushAway(e.clientX, e.clientY);
      if (Math.random() < 0.05) showToast("Nopeee üôàüí®");
    }
  }

  playground.addEventListener("pointermove", onPointerMove);

  // On touch start, also trigger escape immediately
  playground.addEventListener("pointerdown", (e) => {
    // pointerdown on playground helps mobile where move is less frequent
    onPointerMove(e);
  });

  // Clicking NO: tease + jump away
  noBtn.addEventListener("pointerdown", (e) => {
    e.preventDefault();
    noTries++;
    triesPill.textContent = "No tries: " + noTries;
    showToast(tease[noTries % tease.length]);
    pushAway(e.clientX, e.clientY);

    // make it eventually surrender
    if (noTries === 8) hint.textContent = "Awww you‚Äôre persistent üò≥üíû";
    if (noTries >= 12){
      noBtn.textContent = "Okay‚Ä¶ YES ü•πüíò";
      noBtn.addEventListener("click", () => yesBtn.click(), { once:true });
      showToast("Alright‚Ä¶ you win üòåüíñ");
    }
  });

  // YES click should always work
  yesBtn.addEventListener("click", () => {
    statusPill.textContent = "Status: YES üíñ";
    result.textContent = "YAY! You said YES üíû‚ú®";
    result.style.color = "#0d6b3a";
    hint.textContent = "Awww ü•∞ (try refreshing‚ÄîYES stays true in your heart) üíå";

    launchConfetti();
    heartBurst();
  });

  function heartBurst(){
    const emojis = ["üíñ","üíû","üíò","üíù","üå∑","‚ú®","ü•∞"];
    for (let i=0;i<20;i++){
      const h = document.createElement("div");
      h.className = "heartBurst";
      h.textContent = emojis[Math.floor(Math.random()*emojis.length)];
      h.style.left = (Math.random()*100) + "vw";
      h.style.top = (78 + Math.random()*18) + "vh";
      h.style.fontSize = (16 + Math.random()*22) + "px";
      h.style.animationDuration = (1.0 + Math.random()*0.6) + "s";
      document.body.appendChild(h);
      setTimeout(() => h.remove(), 1600);
    }
  }

  function launchConfetti(){
    const colors = ["#ff3b5c","#358717","#ffd166","#6c63ff","#00c2ff","#ff8fab"];
    for (let i=0;i<40;i++){
      const c = document.createElement("div");
      c.className = "confetti";
      c.style.left = (Math.random()*100) + "vw";
      c.style.top = (-6 - Math.random()*12) + "vh";
      c.style.background = colors[Math.floor(Math.random()*colors.length)];
      c.style.borderRadius = (Math.random()>.5 ? "2px" : "999px");
      c.style.width = (8 + Math.random()*8) + "px";
      c.style.height = (8 + Math.random()*10) + "px";
      c.style.animationDuration = (1.0 + Math.random()*0.6) + "s";
      document.body.appendChild(c);
      setTimeout(() => c.remove(), 1700);
    }
  }
});
</script>
</body>
</html>

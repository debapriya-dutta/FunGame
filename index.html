<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will you be my Valentine? üíò</title>

  <style>
    :root{
      --bg1:#ff9a9e;
      --bg2:#fad0c4;
      --bg3:#fbc2eb;
      --card:rgba(255,255,255,.92);
      --text:#2b2b2b;
      --muted:rgba(0,0,0,.62);
      --yes:#358717;
      --no:#ff3b5c;
      --shadow:0 22px 60px rgba(0,0,0,.18);
      --ring:0 0 0 4px rgba(255,59,92,.22);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      color:var(--text);
      overflow:hidden;
      background:
        radial-gradient(1200px 800px at 15% 10%, rgba(255,255,255,.35), transparent 55%),
        radial-gradient(900px 650px at 85% 20%, rgba(255,255,255,.25), transparent 55%),
        linear-gradient(135deg,var(--bg1),var(--bg2),var(--bg3));
    }

    .card{
      width:min(720px,92vw);
      background:var(--card);
      border-radius:26px;
      padding:28px 22px 22px;
      box-shadow:var(--shadow);
      position:relative;
      overflow:hidden;
      border:1px solid rgba(0,0,0,.05);
    }

    /* shimmer - IMPORTANT: pointer-events none so it never blocks clicks */
    .card::before{
      content:"";
      position:absolute; inset:-80px;
      background:linear-gradient(110deg,transparent 20%,rgba(255,255,255,.55) 35%,transparent 55%);
      transform:translateX(-60%);
      animation:shimmer 5.5s ease-in-out infinite;
      pointer-events:none;
      z-index:0;
    }
    @keyframes shimmer{
      0%{transform:translateX(-65%) rotate(8deg); opacity:.2}
      45%{opacity:.35}
      100%{transform:translateX(65%) rotate(8deg); opacity:.2}
    }

    header{display:flex; gap:12px; align-items:flex-start; position:relative; z-index:2}
    .titleWrap{flex:1}
    h1{margin:0 0 6px; font-size:clamp(26px,3.2vw,42px); line-height:1.1}
    .subtitle{margin:0; font-size:15px; color:var(--muted)}

    .pillRow{
      margin-top:10px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      justify-content:center;
      position:relative;
      z-index:2;
    }
    .pill{
      font-size:12px;
      padding:7px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.75);
      border:1px solid rgba(0,0,0,.06);
      color:rgba(0,0,0,.65);
      backdrop-filter:blur(8px);
    }
.playground{
  position:relative;
  height:260px;
  margin-top:14px;
  border-radius:20px;
  background:
    radial-gradient(circle at 20% 30%, #ffd6e8, transparent 60%),
    radial-gradient(circle at 80% 40%, #c7e9ff, transparent 60%),
    radial-gradient(circle at 50% 80%, #d6ffd8, transparent 60%),
    #ffffff;
  border:1px solid rgba(0,0,0,.06);
}
    .btn{
      border:0;
      padding:14px 22px;
      border-radius:16px;
      font-weight:800;
      font-size:16px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
      position:absolute;
      transition: transform .08s ease, filter .12s ease, box-shadow .12s ease;
      will-change:left,top,transform;
      z-index:3;
    }
    .btn:active{transform:scale(.98)}
    .btn:focus-visible{outline:none; box-shadow:var(--ring)}

    .yesBtn{
      left:30%;
      top:64%;
      background:var(--yes);
      color:#fff;
      box-shadow:0 14px 30px rgba(53,135,23,.28);
    }
    .noBtn{
      left:58%;
      top:64%;
      background:var(--no);
      color:#fff;
      box-shadow:0 14px 30px rgba(255,59,92,.28);
    }

    .result{margin-top:12px; min-height:28px; font-size:18px; font-weight:800; position:relative; z-index:2}
    .hint{margin-top:6px; font-size:12px; color:rgba(0,0,0,.55); position:relative; z-index:2}

    .toast{
      position:absolute;
      left:50%;
      top:14px;
      transform:translateX(-50%);
      background:rgba(0,0,0,.75);
      color:#fff;
      padding:8px 12px;
      border-radius:12px;
      font-size:13px;
      opacity:0;
      pointer-events:none;
      transition:opacity .18s ease, transform .18s ease;
      z-index:50;
      white-space:nowrap;
    }
    .toast.show{opacity:1; transform:translateX(-50%) translateY(2px)}

    .confetti{
      position:fixed;
      pointer-events:none;
      opacity:1;
      animation:fall 1.25s linear forwards;
      z-index:999;
    }
    @keyframes fall{
      0%{transform:translateY(0) rotate(0deg); opacity:1}
      100%{transform:translateY(110vh) rotate(720deg); opacity:0}
    }
    .heartBurst{
      position:fixed;
      pointer-events:none;
      animation:heartUp 1.35s ease forwards;
      z-index:999;
    }
    @keyframes heartUp{
      0%{transform:translateY(0) scale(1); opacity:1}
      100%{transform:translateY(-110vh) rotate(240deg) scale(1.15); opacity:0}
    }
  </style>
</head>

<body>
  <div class="card">
    <div class="toast" id="toast" aria-live="polite"></div>

    <header>
      <div class="titleWrap">
        <h1 id="title">Will you be my Valentine? üíòü•π</h1>
        <p class="subtitle" id="subtitle">Just a cute little question for you üíå‚ú®</p>
      </div>
    </header>

    <div class="pillRow">
      <span class="pill" id="triesPill">No tries: 0</span>
      <span class="pill" id="statusPill">Status: pending</span>
    </div>

    <div class="playground" id="playground" aria-label="Buttons area">
      <button class="btn yesBtn" id="yesBtn">YES üíñ</button>
      <button class="btn noBtn" id="noBtn">NO üôà</button>
    </div>

    <div class="result" id="result"></div>
    <div class="hint" id="hint">Move closer to ‚ÄúNO‚Äù‚Ä¶ it will keep running üòÑüí®</div>
  </div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // requestAnimationFrame is best for smooth UI animation (per-frame visual update). [1](https://microsoft.sharepoint.com/teams/CalcCanvasIDC/_layouts/15/Doc.aspx?sourcedoc=%7B27199752-50AB-45B8-B38F-C72CA226EB05%7D&file=Interactivity%20overview.pptx&action=edit&mobileredirect=true&DefaultItemOpen=1)
  console.log("Valentine page JS loaded ‚úÖ");

  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");
  const playground = document.getElementById("playground");
  const result = document.getElementById("result");
  const toast = document.getElementById("toast");
  const triesPill = document.getElementById("triesPill");
  const statusPill = document.getElementById("statusPill");
  const hint = document.getElementById("hint");

  if (!yesBtn || !noBtn || !playground) {
    console.error("Missing elements. Check IDs: yesBtn/noBtn/playground");
    return;
  }

  // ---------- Toast ----------
  let toastTimer = null;
  function showToast(msg){
    if(!msg) return;
    toast.textContent = msg;
    toast.classList.add("show");
    clearTimeout(toastTimer);
    toastTimer = setTimeout(()=>toast.classList.remove("show"), 900);
  }

  // ---------- Confetti & Hearts ----------
  function launchConfetti(){
    const colors = ["#ff3b5c","#358717","#ffd166","#6c63ff","#00c2ff","#ff8fab"];
    for(let i=0;i<40;i++){
      const c = document.createElement("div");
      c.className = "confetti";
      c.style.left = (Math.random()*100) + "vw";
      c.style.top  = (-6 - Math.random()*12) + "vh";
      c.style.background = colors[Math.floor(Math.random()*colors.length)];
      c.style.borderRadius = (Math.random()>.5 ? "2px":"999px");
      c.style.width  = (8 + Math.random()*8) + "px";
      c.style.height = (8 + Math.random()*10) + "px";
      c.style.animationDuration = (1.0 + Math.random()*0.6) + "s";
      document.body.appendChild(c);
      setTimeout(()=>c.remove(), 1700);
    }
  }
  function heartBurst(){
    const emojis = ["üíñ","üíû","üíò","üíù","üå∑","‚ú®","ü•∞"];
    for(let i=0;i<20;i++){
      const h = document.createElement("div");
      h.className = "heartBurst";
      h.textContent = emojis[Math.floor(Math.random()*emojis.length)];
      h.style.left = (Math.random()*100) + "vw";
      h.style.top  = (78 + Math.random()*18) + "vh";
      h.style.fontSize = (16 + Math.random()*22) + "px";
      h.style.animationDuration = (1.0 + Math.random()*0.6) + "s";
      document.body.appendChild(h);
      setTimeout(()=>h.remove(), 1600);
    }
  }

  // ---------- YES click ----------
  yesBtn.addEventListener("click", () => {
    statusPill.textContent = "Status: YES üíñ";
    result.textContent = "YAY! You said YES üíû";
    result.style.color = "#0d6b3a";
    hint.textContent = "Awww üíñ‚ú®";
    showToast("Best answer üòåüíò");
    launchConfetti();
    heartBurst();

    // Stop NO from running after YES
    noBtn.style.pointerEvents = "none";
    noBtn.style.filter = "grayscale(.25)";
  });

  // ---------- NO continuous runaway (never disappears) ----------
  let noTries = 0;
  const tease = [
    "Oops üòá","Nice try üòå","Hehe‚Ä¶ not today üíû","I‚Äôm shy üôà","Too slow üòÑ",
    "Are you sure? ü•∫","Try YES instead üòò","Still chasing? üò≥","Nopeee üôàüí®","Okay okay‚Ä¶ üòÖ"
  ];

  // Current NO position (inside playground, pixels)
  let noX = 0, noY = 0;

  // Mouse position relative to playground
  let mouseX = -9999, mouseY = -9999;

  const padding = 10;
  const dangerRadius = 190; // closer => runs more (increase for more sensitive)
  const maxSpeed = 14;      // increase for faster running
  const wobble = 0.9;       // small wobble so it feels alive

  const clamp = (v, min, max) => Math.max(min, Math.min(max, v));

  function placeNoRandom(){
    const pg = playground.getBoundingClientRect();
    const nb = noBtn.getBoundingClientRect();
    const maxX = pg.width  - nb.width  - padding;
    const maxY = pg.height - nb.height - padding;
    noX = padding + Math.random() * Math.max(0, maxX);
    noY = padding + Math.random() * Math.max(0, maxY);
    noBtn.style.left = noX + "px";
    noBtn.style.top  = noY + "px";
  }

  // Initialize NO position once layout is ready
  requestAnimationFrame(placeNoRandom);

  // Track pointer inside playground (pointer events handle mouse + touch)
  playground.addEventListener("pointermove", (e) => {
    const pg = playground.getBoundingClientRect();
    mouseX = e.clientX - pg.left;
    mouseY = e.clientY - pg.top;
  });

  playground.addEventListener("pointerleave", () => {
    mouseX = -9999;
    mouseY = -9999;
  });

  // Tapping NO increases tries + teasing
  noBtn.addEventListener("pointerdown", (e) => {
    e.preventDefault();
    noTries++;
    triesPill.textContent = "No tries: " + noTries;
    showToast(tease[Math.min(tease.length-1, noTries-1)]);
    if (noTries >= 12){
      noBtn.textContent = "Okay‚Ä¶ YES ü•πüíò";
      noBtn.addEventListener("click", () => yesBtn.click(), { once:true });
      showToast("Alright‚Ä¶ you win üòåüíñ");
    }
  });

  // Continuous animation loop (smooth and persistent)
  function animateRunaway(){
    const pg = playground.getBoundingClientRect();
    const nb = noBtn.getBoundingClientRect();

    const maxX = pg.width  - nb.width  - padding;
    const maxY = pg.height - nb.height - padding;

    // Center of NO button (relative to playground)
    const btnCX = noX + nb.width/2;
    const btnCY = noY + nb.height/2;

    const dx = btnCX - mouseX;
    const dy = btnCY - mouseY;
    const dist = Math.hypot(dx, dy);

    // Only run if mouse is near
    if (dist < dangerRadius){
      const len = dist || 1;
      const ux = dx / len;
      const uy = dy / len;

      // push factor: closer => stronger
      const push = clamp((dangerRadius - dist) / dangerRadius, 0, 1);
      const speed = 4 + push * (maxSpeed - 4);

      noX += ux * speed;
      noY += uy * speed;

      // tiny wobble
      noX += (Math.random() - 0.5) * wobble;
      noY += (Math.random() - 0.5) * wobble;

      // keep inside playground (never disappear)
      noX = clamp(noX, padding, Math.max(padding, maxX));
      noY = clamp(noY, padding, Math.max(padding, maxY));

      // apply
      noBtn.style.left = noX + "px";
      noBtn.style.top  = noY + "px";
    }

    requestAnimationFrame(animateRunaway);
  }

  requestAnimationFrame(animateRunaway);
});
</script>
</body>
</html>
